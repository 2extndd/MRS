# üéØ –§–ò–ù–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï: Query Delay Time –∏ Category Blacklist

## üìã –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≤–µ–¥—ë–Ω:

### 1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—â–∏ m38279815197
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í–µ—â—å –ù–ï –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö - —ç—Ç–æ –ù–û–†–ú–ê–õ–¨–ù–û!

**–ü—Ä–∏—á–∏–Ω–∞:** 
- –í–µ—â—å: "Êú™‰ΩøÁî®„ÄÄ„É≠„Ç§„É§„É´„Ç≥„Éö„É≥„Éè„Éº„Ç≤„É≥ „Ç∏„É•„É™„Ç¢„Çπ „Éû„Ç∞„Ç´„ÉÉ„Éó„ÄÄÂåóÊ¨ß„ÄÄ2ÂÄã"
- –¶–µ–Ω–∞: ¬•4800
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è: "„Ç≥„ÉÉ„Éó„Éª„Ç∞„É©„Çπ„ÉªÈÖíÂô®" (–ø–æ—Å—É–¥–∞/—Å—Ç–∞–∫–∞–Ω—ã)
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è **–ù–ï –≤ blacklist** (—Ç–æ–ª—å–∫–æ 2 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ blacklist)
- –í–µ—â—å **–Ω–µ –ø–æ–ø–∞–ª–∞ –≤ —Ç–æ–ø-50 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞** –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–í—ã–≤–æ–¥:** Blacklist —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –í–µ—â—å –ø—Ä–æ—Å—Ç–æ –Ω–µ –±—ã–ª–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –≤–∞—à–µ–≥–æ –ø–æ–∏—Å–∫–∞.

---

### 2Ô∏è‚É£ Category Blacklist - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ

**–¢–µ–∫—É—â–∏–π blacklist –≤ –ë–î:**
```json
['„Ç≤„Éº„É†„Éª„Åä„ÇÇ„Å°„ÇÉ„Éª„Ç∞„ÉÉ„Ç∫', 'Êú¨„ÉªÈü≥Ê•Ω„Éª„Ç≤„Éº„É†']
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `core.py` —Å—Ç—Ä–æ–∫–∞ 390-418
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–î–û —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î**
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–î–û —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** (—ç–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏)
- Hot reload –∏–∑ –ë–î –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥

**–õ–æ–≥–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
```python
[FILTER] üö´ Item rejected: category '„Ç≤„Éº„É†„Éª„Åä„ÇÇ„Å°„ÇÉ„Éª„Ç∞„ÉÉ„Ç∫' is blacklisted
[FILTER]    Title: –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
[FILTER]    Matched blacklist: '„Ç≤„Éº„É†„Éª„Åä„ÇÇ—á„ÇÉ„Éª„Ç∞„ÉÉ„Ç∫'
```

---

## üöÄ –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –° CRON JOBS

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ):
- Railway Cron –º–∏–Ω–∏–º—É–º 5 –º–∏–Ω—É—Ç
- –î—É–º–∞–ª–∏, —á—Ç–æ –Ω—É–∂–µ–Ω –≤–Ω–µ—à–Ω–∏–π cron –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –•–æ—Ç–µ–ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Query Delay —á–µ—Ä–µ–∑ Web UI –º–µ–Ω—å—à–µ 5 –º–∏–Ω—É—Ç

### ‚úÖ –†–ï–®–ï–ù–ò–ï (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞):

**Railway Cron –ù–ï –ù–£–ñ–ï–ù! –í–∞—à scheduler –£–ñ–ï —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7 –≤–Ω—É—Ç—Ä–∏ web –ø—Ä–æ—Ü–µ—Å—Å–∞!**

#### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
```
Railway Web Service
  ‚Üì
start.sh ‚Üí gunicorn ‚Üí wsgi.py
  ‚Üì
Flask Web UI (port 8080)
  ‚Üì
wsgi.py –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç scheduler –≤ background thread
  ‚Üì
Scheduler —Ä–∞–±–æ—Ç–∞–µ—Ç –ü–û–°–¢–û–Ø–ù–ù–û (infinite loop)
  ‚Üì
schedule.every(config.SEARCH_INTERVAL).seconds.do(search_cycle)
  ‚Üì
Hot reload config –∏–∑ –ë–î –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
```

#### –ö–æ–¥ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ (wsgi.py —Å—Ç—Ä–æ–∫–∏ 36-76):
```python
if os.getenv('RAILWAY_ENVIRONMENT'):
    logger.info("[AUTOSTART] Railway environment detected - starting scheduler...")
    
    def start_scheduler_with_restart():
        while True:  # Infinite restart loop
            try:
                from mercari_notifications import MercariNotificationApp
                app_instance = MercariNotificationApp()
                app_instance.run_scheduler()  # Infinite loop
            except Exception as e:
                logger.error(f"Scheduler crashed: {e}")
                time.sleep(restart_delay)
    
    scheduler_thread = threading.Thread(target=start_scheduler_with_restart, daemon=True)
    scheduler_thread.start()
```

---

## üéÆ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:

### –ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Web UI ‚Üí `/config`
2. –ù–∞–π–¥–∏—Ç–µ "Query Delay (seconds) ‚ö°"
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: **30, 60, 120, 180 —Å–µ–∫—É–Ω–¥**
4. –ù–∞–∂–º–∏—Ç–µ "Save System Settings"
5. Scheduler –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–µ—á–µ–Ω–∏–µ 60 —Å–µ–∫—É–Ω–¥

### –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤ blacklist:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Web UI ‚Üí `/config`
2. –ù–∞–π–¥–∏—Ç–µ "Category Filter"
3. –î–æ–±–∞–≤—å—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–æ–¥–Ω–∞ –Ω–∞ —Å—Ç—Ä–æ–∫—É):
```
„Ç≤„Éº„É†„Éª„Åä„ÇÇ„Å°„ÇÉ„Éª„Ç∞„ÉÉ„Ç∫
Êú¨„ÉªÈü≥Ê•Ω„Éª„Ç≤„Éº„É†
„Ç®„É≥„Çø„É°„Éª„Éõ„Éì„Éº
```
4. –ù–∞–∂–º–∏—Ç–µ "Save Category Filter"
5. –ì–æ—Ç–æ–≤–æ! –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞—á–Ω—ë—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ä–∞–∑—É

---

## üîß –ß–¢–û –î–ï–õ–ê–¢–¨ –° RAILWAY CRON:

### ‚ùå –£–î–ê–õ–ò–¢–ï Railway Cron Job!

**–ü–æ—á–µ–º—É:**
- Scheduler —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ web –ø—Ä–æ—Ü–µ—Å—Å–∞ 24/7
- Railway Cron —Å–æ–∑–¥–∞—ë—Ç –ª–∏—à–Ω–∏–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
- Railway Cron –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 5 –º–∏–Ω—É—Ç–∞–º–∏ (–Ω–µ –Ω—É–∂–Ω–æ)
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π scheduler –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª—é–±—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–¥–∞–∂–µ 30 —Å–µ–∫—É–Ω–¥!)

**–ö–∞–∫ —É–¥–∞–ª–∏—Ç—å:**
1. Railway Dashboard ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. Settings ‚Üí Cron Jobs
3. –£–¥–∞–ª–∏—Ç–µ cron job —Å `* * * * *` (–∏–ª–∏ –∫–∞–∫–æ–π —Ç–∞–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

---

## üìä –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´:

### –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ scheduler –∑–∞–ø—É—â–µ–Ω:
```bash
# –í Railway logs –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏:
[AUTOSTART] Railway environment detected - starting scheduler...
[AUTOSTART] ‚úÖ Scheduler thread started in background with auto-restart
[SCHEDULER] ‚è∞ Entering main loop...
[SCHEDULER] Jobs scheduled: 4
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª:
```python
# Web UI ‚Üí /config
Query Delay (seconds): 60  # –í–∞—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ

# –ò–ª–∏ —á–µ—Ä–µ–∑ API:
curl https://your-app.railway.app/api/scheduler-status
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å blacklist:
```python
# Web UI ‚Üí /config ‚Üí Category Filter
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–æ–≥–∞—Ö:
[CONFIG] Category blacklist loaded: 2 categories
[CONFIG]   1. „Ç≤„Éº„É†„Éª„Åä„ÇÇ„Å°„ÇÉ„Éª„Ç∞„ÉÉ„Ç∫
[CONFIG]   2. Êú¨„ÉªÈü≥Ê•Ω„Éª„Ç≤„Éº„É†
```

---

## üéØ –ò–¢–û–ì–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:

### 1. Query Delay Time:
- ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 60-120 —Å–µ–∫—É–Ω–¥** (–±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ –Ω–∞–≥—Ä—É–∑–∫–æ–π)
- ‚ö° –ú–æ–∂–Ω–æ: 30 —Å–µ–∫—É–Ω–¥ (–¥–ª—è –æ—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
- ‚ö†Ô∏è –û—Å—Ç–æ—Ä–æ–∂–Ω–æ: –º–µ–Ω—å—à–µ 30 —Å–µ–∫—É–Ω–¥ (–≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ API)

### 2. Category Blacklist:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –î–û —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î
- ‚úÖ Hot reload –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
- üìù –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—á–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å Mercari (–Ω–∞ —è–ø–æ–Ω—Å–∫–æ–º)

### 3. Railway Cron:
- ‚ùå **–£–î–ê–õ–ò–¢–ï** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è!
- ‚úÖ Scheduler —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–Ω—É—Ç—Ä–∏ web –ø—Ä–æ—Ü–µ—Å—Å–∞

---

## üêõ –û–¢–õ–ê–î–ö–ê:

### –ï—Å–ª–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Railway logs: `[SCHEDULER] ‚è∞ Loop alive!`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–∏—Å–∫–∏: Web UI ‚Üí `/queries`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª: Web UI ‚Üí `/config`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: Web UI ‚Üí `/logs`

### –ï—Å–ª–∏ blacklist –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã: Web UI ‚Üí `/config`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: `[FILTER] üö´ Item rejected`
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ—á–Ω—ã–µ (–Ω–∞ —è–ø–æ–Ω—Å–∫–æ–º)

---

## üìù –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ö–û–î–ï:

### ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `web_ui_plugin/templates/config.html`:
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ—è—Å–Ω–µ–Ω–∏–µ —á—Ç–æ Query Delay –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ 5 –º–∏–Ω—É—Ç
- –ò–∑–º–µ–Ω—ë–Ω –º–∏–Ω–∏–º—É–º —Å 60 –Ω–∞ 30 —Å–µ–∫—É–Ω–¥
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: 60-120 —Å–µ–∫—É–Ω–¥

### ‚úÖ –°–æ–∑–¥–∞–Ω `SOLUTION_SUMMARY.md`:
- –ü–æ–ª–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:

**–í–°–Å –£–ñ–ï –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û!**

- ‚úÖ Scheduler –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ Query Delay –º–æ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å –ª—é–±–æ–π (–¥–∞–∂–µ 30 —Å–µ–∫—É–Ω–¥)
- ‚úÖ Category Blacklist —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Hot reload –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ùå Railway Cron –ù–ï –ù–£–ñ–ï–ù - —É–¥–∞–ª–∏—Ç–µ –µ–≥–æ!

**–ü—Ä–æ—Å—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Query Delay –≤ Web UI –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å!** üöÄ
