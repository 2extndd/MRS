# üîç –ê–ù–ê–õ–ò–ó –°–ò–°–¢–ï–ú–´ - –ö–†–ê–¢–ö–ê–Ø –°–í–û–î–ö–ê

## ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢:

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ü–∏–∫–ª —Å–∫–∞–Ω–µ—Ä–∞ (mercari_notifications.py)
- ‚úÖ Scheduler –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ `schedule.every(config.SEARCH_INTERVAL).seconds.do(self.search_and_notify)`
- ‚úÖ Hot reload –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é
- ‚úÖ Telegram startup notification –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ Per-query scan intervals (–∫–∞–∂–¥—ã–π query –∏–º–µ–µ—Ç —Å–≤–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª)

**–í–´–í–û–î:** –ê–≤—Ç–æ—Ü–∏–∫–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é!

### 2. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–∫—Å–∏ (proxies.py)
- ‚úÖ ProxyManager —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∫—Å–∏ (ThreadPoolExecutor)
- ‚úÖ ProxyRotator –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ core.py

**–ù–û:** –§–æ—Ä–º–∞—Ç –ø—Ä–æ–∫—Å–∏ –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è! –ù—É–∂–µ–Ω –ø–∞—Ä—Å–µ—Ä –¥–ª—è `ip:port:user:pass`

### 3. Web UI
- ‚úÖ Dashboard, Items, Queries, Config, Logs
- ‚úÖ Proxy testing endpoint
- ‚úÖ Force scan —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Config hot reload

## ‚ùå –ß–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢:

### 1. –ö–†–ò–¢–ò–ß–ù–û: –§–æ—Ä–º–∞—Ç –ø—Ä–æ–∫—Å–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–¥ –æ–∂–∏–¥–∞–µ—Ç `http://user:pass@ip:port`, –Ω–æ —É –≤–∞—Å `ip:port:user:pass`

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—Å–µ—Ä –≤ `proxies.py`:
```python
def parse_proxy_string(proxy_str: str) -> Optional[str]:
    parts = proxy_str.strip().split(':')
    if len(parts) == 4:
        ip, port, user, password = parts
        return f"http://{user}:{password}@{ip}:{port}"
    return None
```

### 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (0 new items bug)
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ - "Found 6 items (0 new)" –Ω–æ items –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ—Å–º–æ—Ç—Ä–µ–ª core.py:
```python
# –°—Ç—Ä–æ–∫–∞ 232-236
items = items_result.items  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å–ø–∏—Å–æ–∫
items_found = len(items)
logger.info(f"API returned {items_found} items")

# –°—Ç—Ä–æ–∫–∞ 243-253
new_items_data = self._process_new_items(items, search_id)
return {
    'success': True,
    'items_found': items_found,
    'new_items': len(new_items_data),  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Å—á–∏—Ç–∞–µ—Ç
    'items_data': new_items_data
}
```

**–ù–û:** –í `search_all_queries()` (—Å—Ç—Ä–æ–∫–∞ 143):
```python
if items_result['success']:
    results['new_items'] += items_result['new_items']  # ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
```

**–í–´–í–û–î:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ü–†–ê–í–ò–õ–¨–ù–û! –í–æ–∑–º–æ–∂–Ω–æ, –≤ –ø—Ä–æ—à–ª–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –±—ã–ª —Å—Ç–∞—Ä—ã–π –∫–æ–¥.

### 3. –ü—Ä–æ–∫—Å–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
**–ü—Ä–æ–±–ª–µ–º–∞:** `image_utils.py` –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–∫—Å–∏

**–¢–µ–∫—É—â–∏–π –∫–æ–¥ (—Å—Ç—Ä–æ–∫–∞ 67-85):**
```python
response = requests.get(
    image_url,
    headers=headers,
    timeout=timeout  # ‚ùå –ù–µ—Ç proxies!
)
```

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–∫—Å–∏ –≤ request

## üéØ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π):

### –®–∞–≥ 1: –ü–∞—Ä—Å–µ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ –ø—Ä–æ–∫—Å–∏ (–ö–†–ò–¢–ò–ß–ù–û)
- –î–æ–±–∞–≤–∏—Ç—å `parse_proxy_string()` –≤ `proxies.py`
- –û–±–Ω–æ–≤–∏—Ç—å `ProxyManager.__init__()` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤: `ip:port:user:pass` –∏ `http://...`

### –®–∞–≥ 2: –ü—Ä–æ–∫—Å–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ö–†–ò–¢–ò–ß–ù–û)
- –û–±–Ω–æ–≤–∏—Ç—å `image_utils.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∫—Å–∏
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `proxy_rotator`
- Fallback –Ω–∞ direct connection –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ

### –®–∞–≥ 3: –£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–í–ê–ñ–ù–û)
- –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤ `_process_new_items()`
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏–º–µ–Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö items
- –£–ª—É—á—à–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤–∞—à–∏–º–∏ –ø—Ä–æ–∫—Å–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

### –®–∞–≥ 5: Web UI monitoring
- –î–æ–±–∞–≤–∏—Ç—å `/api/proxy/stats`
- Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–∫—Å–∏
- Proxy performance metrics

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. ‚úÖ –ü—Ä–æ–∫—Å–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `ip:port:user:pass` —Ä–∞–±–æ—Ç–∞—é—Ç
2. ‚úÖ Cloudflare –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–±—Ö–æ–¥–∏—Ç—Å—è
3. ‚úÖ Images –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
4. ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–æ—Ü–µ—Å—Å
5. ‚úÖ Web UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–∫—Å–∏
