# Railway Manual Setup - MercariSearcher

## ‚ö†Ô∏è API Token Limitations

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π Railway API —Ç–æ–∫–µ–Ω –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤, –Ω–æ –Ω–µ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤.
–ù–µ–æ–±—Ö–æ–¥–∏–º–∞ **—Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Railway Dashboard**.

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard

**URL**: https://railway.app/project/f17da572-14c9-47b5-a9f1-1b6d5b6dea2d

---

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ PostgreSQL

1. –ù–∞–∂–º–∏—Ç–µ **"+ New"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"Database"**
3. –í—ã–±–µ—Ä–∏—Ç–µ **"PostgreSQL"**
4. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥
5. ‚úì –ì–æ—Ç–æ–≤–æ!

---

### –®–∞–≥ 3: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–ø–µ—Ä–≤—ã–π —Å–µ—Ä–≤–∏—Å)

1. –ù–∞–∂–º–∏—Ç–µ **"+ New"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"GitHub Repo"**
3. –ù–∞–π–¥–∏—Ç–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ: **`2extndd/MRS`**
4. Branch: **`main`**
5. –ù–∞–∂–º–∏—Ç–µ **"Add Service"**

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –ø–µ—Ä–≤—ã–π —Å–µ—Ä–≤–∏—Å. –ù–∞–º –Ω—É–∂–Ω–æ **–î–í–ê** —Å–µ—Ä–≤–∏—Å–∞ (web –∏ worker).

---

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ü–ï–†–í–´–ô –°–µ—Ä–≤–∏—Å (WEB)

1. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å
2. –ù–∞–∂–º–∏—Ç–µ **"Settings"**
3. –ò–∑–º–µ–Ω–∏—Ç–µ –∏–º—è –Ω–∞: **`web`**
4. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –¥–æ **"Deploy"** —Å–µ–∫—Ü–∏–∏
5. **Start Command**:
   ```bash
   gunicorn --bind 0.0.0.0:$PORT --timeout 30 --log-level info wsgi:application
   ```
6. –ù–∞–∂–º–∏—Ç–µ **"Networking"** –≤–∫–ª–∞–¥–∫—É
7. –ù–∞–∂–º–∏—Ç–µ **"Generate Domain"** (–≤–∫–ª—é—á–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø)
8. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Variables"** –≤–∫–ª–∞–¥–∫—É
9. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–Ω–∞–∂–∏–º–∞–π—Ç–µ "+ New Variable" –¥–ª—è –∫–∞–∂–¥–æ–π):

```bash
TELEGRAM_BOT_TOKEN=8312495672:AAG7dnspW-QFbWKJQXy6Mh04oG4uDp-3aSw
TELEGRAM_CHAT_ID=-4997297083
DISPLAY_CURRENCY=USD
USD_CONVERSION_RATE=0.0067
SEARCH_INTERVAL=300
MAX_ITEMS_PER_SEARCH=50
REQUEST_DELAY_MIN=1.5
REQUEST_DELAY_MAX=3.5
LOG_LEVEL=INFO
```

10. –ù–∞–∂–º–∏—Ç–µ **"Deploy"** –∏–ª–∏ –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—Å—è

---

### –®–∞–≥ 5: –°–æ–∑–¥–∞–π—Ç–µ –í–¢–û–†–û–ô –°–µ—Ä–≤–∏—Å (WORKER)

1. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–∏–¥ –ø—Ä–æ–µ–∫—Ç–∞
2. –ù–∞–∂–º–∏—Ç–µ **"+ New"** —Å–Ω–æ–≤–∞
3. –í—ã–±–µ—Ä–∏—Ç–µ **"Empty Service"**
4. –ù–∞–∑–æ–≤–∏—Ç–µ –µ–≥–æ: **`worker`**
5. –ù–∞–∂–º–∏—Ç–µ **"Settings"** ‚Üí **"Source"**
6. –ù–∞–∂–º–∏—Ç–µ **"Connect Repo"**
7. –í—ã–±–µ—Ä–∏—Ç–µ: **`2extndd/MRS`**
8. Branch: **`main`**
9. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –¥–æ **"Deploy"** —Å–µ–∫—Ü–∏–∏
10. **Start Command**:
    ```bash
    python mercari_notifications.py worker
    ```
11. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Variables"** –≤–∫–ª–∞–¥–∫—É
12. –î–æ–±–∞–≤—å—Ç–µ **–¢–ï –ñ–ï** –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —á—Ç–æ –∏ –≤ –®–∞–≥–µ 4:

```bash
TELEGRAM_BOT_TOKEN=8312495672:AAG7dnspW-QFbWKJQXy6Mh04oG4uDp-3aSw
TELEGRAM_CHAT_ID=-4997297083
DISPLAY_CURRENCY=USD
USD_CONVERSION_RATE=0.0067
SEARCH_INTERVAL=300
MAX_ITEMS_PER_SEARCH=50
REQUEST_DELAY_MIN=1.5
REQUEST_DELAY_MAX=3.5
LOG_LEVEL=INFO
```

13. –ù–∞–∂–º–∏—Ç–µ **"Deploy"**

---

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ WEB —Å–µ—Ä–≤–∏—Å:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **web** —Å–µ—Ä–≤–∏—Å
2. –ù–∞–∂–º–∏—Ç–µ **"Deployments"**
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∑–µ–ª–µ–Ω—É—é –≥–∞–ª–æ—á–∫—É ‚úì (1-2 –º–∏–Ω—É—Ç—ã)
4. –ù–∞–∂–º–∏—Ç–µ **"View Logs"**
5. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
   ```
   [INFO] Starting gunicorn 21.2.0
   [INFO] Listening at: http://0.0.0.0:3000
   ```
6. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Settings"** ‚Üí **"Networking"**
7. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `web-production.up.railway.app`)
8. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Üí –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å MercariSearcher Dashboard ‚úì

#### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ WORKER —Å–µ—Ä–≤–∏—Å:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **worker** —Å–µ—Ä–≤–∏—Å
2. –ù–∞–∂–º–∏—Ç–µ **"Deployments"**
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∑–µ–ª–µ–Ω—É—é –≥–∞–ª–æ—á–∫—É ‚úì (1-2 –º–∏–Ω—É—Ç—ã)
4. –ù–∞–∂–º–∏—Ç–µ **"View Logs"**
5. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
   ```
   [INFO] MercariSearcher v1.0.0 Worker Starting...
   [INFO] Tokyo timezone: 2024-11-16 ...
   [INFO] Database: PostgreSQL connected
   [INFO] Telegram: Bot connected
   [INFO] Scheduler: Started (interval: 300s)
   [INFO] Active searches: 0
   ```

#### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PostgreSQL:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **PostgreSQL** —Å–µ—Ä–≤–∏—Å
2. –ù–∞–∂–º–∏—Ç–µ **"Data"** –≤–∫–ª–∞–¥–∫—É
3. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

---

### –®–∞–≥ 7: –î–æ–±–∞–≤—å—Ç–µ –ü–µ—Ä–≤—ã–π –ü–æ–∏—Å–∫

1. –û—Ç–∫—Ä–æ–π—Ç–µ **–ø—É–±–ª–∏—á–Ω—ã–π –¥–æ–º–µ–Ω web —Å–µ—Ä–≤–∏—Å–∞** –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤: `/queries`
3. –ù–∞–∂–º–∏—Ç–µ **"Add New Search"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:

```
Name: Julius Denim
URL: https://jp.mercari.com/search?keyword=julius&category_id=3088&price_max=17621
Telegram Chat ID: -4997297083
Telegram Thread ID: (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ç–æ–ø–∏–∫–∏)
Active: ‚úì –û—Ç–º–µ—á–µ–Ω–æ
```

5. –ù–∞–∂–º–∏—Ç–µ **"Add Search"**

---

### –®–∞–≥ 8: –ñ–¥–∏—Ç–µ –ü–µ—Ä–≤–æ–µ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

- –°–∫–∞–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ **5 –º–∏–Ω—É—Ç** (300 —Å–µ–∫—É–Ω–¥)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ worker'–∞, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å: `[INFO] Scanning search: Julius Denim`
- –ö–æ–≥–¥–∞ —Ç–æ–≤–∞—Ä—ã –Ω–∞–π–¥–µ–Ω—ã ‚Üí Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —á–∞—Ç ID: `-4997297083`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à Telegram —á–∞—Ç –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è!

---

## –û–∂–∏–¥–∞–µ–º—ã–π –§–æ—Ä–º–∞—Ç Telegram –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```
üëî JULIUS - Archive Distressed Denim Jacket

üí¥ $98.50 (¬•14,700)
üìè Size: 2 (M)
üè∑Ô∏è Condition: Used - Good
üì¶ Shipping: ¬•700
üîç Search: Julius Denim

[–§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞]

[Open Mercari] –∫–Ω–æ–ø–∫–∞
```

---

## üîß –†–µ—à–µ–Ω–∏–µ –ü—Ä–æ–±–ª–µ–º

### Web —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è?

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏:**
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `DATABASE_URL` ‚Üí –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –¥–æ–±–∞–≤–ª–µ–Ω
- –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ nixpacks.toml –µ—Å—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –û—à–∏–±–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏ –ø–æ—Ä—Ç–∞ ‚Üí Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `$PORT`

**–†–µ—à–µ–Ω–∏–µ:**
1. Settings ‚Üí Danger Zone ‚Üí **Clear Build Cache**
2. **Redeploy**

### Worker —Å–µ—Ä–≤–∏—Å –Ω–µ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç?

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
- `[ERROR] TELEGRAM_BOT_TOKEN not set` ‚Üí –î–æ–±–∞–≤—å—Ç–µ –≤ Variables
- `[ERROR] Database connection failed` ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PostgreSQL
- `[INFO] Active searches: 0` ‚Üí –î–æ–±–∞–≤—å—Ç–µ –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Web UI

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ worker —Å–µ—Ä–≤–∏—Å

### –ù–µ—Ç Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π?

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:**
```bash
curl https://api.telegram.org/bot8312495672:AAG7dnspW-QFbWKJQXy6Mh04oG4uDp-3aSw/getMe
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ.

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç ID `-4997297083`
- –ë–æ—Ç –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ "Send Messages"
- –õ–æ–≥–∏ worker –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç: `[INFO] Telegram notification sent successfully`

---

## üìã –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π –°–ø–∏—Å–æ–∫

- [ ] PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π **2extndd/MRS** –ø–æ–¥–∫–ª—é—á–µ–Ω
- [ ] **web** —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç
- [ ] **worker** —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞
- [ ] –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ–º–µ–Ω –≤–∫–ª—é—á–µ–Ω –¥–ª—è **web** —Å–µ—Ä–≤–∏—Å–∞
- [ ] –û–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∑–µ–ª–µ–Ω—É—é ‚úì –≤ Deployments
- [ ] Web UI –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] –õ–æ–≥–∏ worker –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "Scheduler: Started"
- [ ] –ü–µ—Ä–≤—ã–π –ø–æ–∏—Å–∫ –¥–æ–±–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ Web UI
- [ ] Telegram –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç

---

## üîó –ë—ã—Å—Ç—Ä—ã–µ –°—Å—ã–ª–∫–∏

- **Railway Dashboard**: https://railway.app/project/f17da572-14c9-47b5-a9f1-1b6d5b6dea2d
- **GitHub Repo**: https://github.com/2extndd/MRS
- **Telegram Bot**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ https://t.me/BotFather

---

## ‚úÖ –í—Å–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –û–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ Railway Variables:

```bash
TELEGRAM_BOT_TOKEN=8312495672:AAG7dnspW-QFbWKJQXy6Mh04oG4uDp-3aSw
TELEGRAM_CHAT_ID=-4997297083
DISPLAY_CURRENCY=USD
USD_CONVERSION_RATE=0.0067
SEARCH_INTERVAL=300
MAX_ITEMS_PER_SEARCH=50
REQUEST_DELAY_MIN=1.5
REQUEST_DELAY_MAX=3.5
LOG_LEVEL=INFO
```

---

**–í–∞—à MercariSearcher –≥–æ—Ç–æ–≤ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å Mercari.jp! üöÄ**

–°–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —à–∞–≥–∞–º, –∏ –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–Ω—É—Ç!
